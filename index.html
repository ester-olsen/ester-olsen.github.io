<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ester's Jumpstart deck builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
    <div class="container" style="width: 960px; max-width: 100%;">
        <h1 class="mt-3">Ester's Jumpstart deck builder</h1>
        <p class="text-muted">Ester Olsen, 2022-03-01.</p>
        <ol>
            <li><a href="#loadPacks">Load packs</a></li>
            <li><a href="#twoPackJumpstart">Two-pack Jumpstart</a></li>
            <li><a href="#fourPackJumpstart">Four-pack Jumpstart</a></li>
        </ol>
        <p class="mb-5">This deck builder was made in order to make it more convenient to play Jumpstart on the website untap.in. Deck lists are formatted accordingly.</p>
        <h2 id="loadPacks" class="fw-bold">Load packs</h2>
        <p>Load a CSV file with Jumpstart packs to randomly pick from, or load Ester's Jumpstart cube.</p>
        <div class="row">
            <div class="col border-end">
                <h3 class="text-primary">File</h3>
                <p>Using the input below, load a CSV file containing the following columns.</p>
                <p class="font-monospace">Pack name,Pack image URL,Card set ID,Card name</p>
                <p>The first row is skipped over. All fields are strings encapsulated by quotation marks.</p>
                <label class="form-label w-100">
                    CSV file
                    <input type="file" id="fileInput" class="form-control" />
                </label>
            </div>
            <div class="col">
                <h3 class="text-primary">Ester's Jumpstart cube</h3>
                <p>This cube consists of sixteen packs from the official Jumpstart set — three monocoloured packs of each colour, and the multicoloured Rainbow pack.</p>
                <p><button type="button" id="estersCubeButton" class="btn btn-primary">Load Ester's Jumpstart cube</button></p>
            </div>
        </div>
        <p id="importParagraph" class="text-success mb-5"></p>
        <h2 id="twoPackJumpstart" class="fw-bold">Two-pack Jumpstart</h2>
        <figure>
            <blockquote cite="https://magic.wizards.com/en/articles/archive/card-preview/behind-scenes-designing-jumpstart-2020-06-17" class="blockquote">
                <p>In Two-Pack, you just open two packs and shuffle them together, and you're ready to play. That's the absolute simplest way to play Jumpstart. No agonizing over your twenty-third card or whether to run that off-color cycling land—just fire it up.</p>
            </blockquote>
            <figcaption class="blockquote-footer">https://magic.wizards.com/en/articles/archive/card-preview/behind-scenes-designing-jumpstart-2020-06-17</figcaption>
        </figure>
        <p id="packs">
            <img src="" id="imageOne" style="width: 10em;" />
            <img src="" id="imageTwo" style="width: 10em;" />
        </p>
        <p id="packsParagraph"></p>
        <label class="form-label w-100 mb-5">
            Deck list
            <textarea readonly rows="10" id="textarea" class="form-control"></textarea>
        </label>
        <h2 id="fourPackJumpstart" class="fw-bold">Four-pack Jumpstart</h2>
        <figure>
            <blockquote cite="https://magic.wizards.com/en/articles/archive/card-preview/behind-scenes-designing-jumpstart-2020-06-17" class="blockquote">
                <p>To play Four-Pack Jumpstart, open four Jumpstart packs and lay out your four themes in front of you. Create two 40-card decks by combining pairs of themes together however you like.</p>
                <p>For example, if the themes I opened were Teferi, Predatory, Walls, and Spellcasting, I might build "Predatory Walls" and "Spellcasting Teferi" as my two decks. Remove the theme label cards, shuffle your two decks separately, and you're ready to play.</p>
                <p>Find an opponent and play a Best-of-Three match. Each player chooses whichever of their two decks they want for the first game, then each player switches to their other deck for game two. Then, after game two, if no player has two wins yet, each player may pick either of their decks for the deciding game three.</p>
                <p>For example, I might choose to play Spellcasting Teferi in game one. In game two, I must switch to my other deck, Predatory Walls. Then if there's a game three, I could choose to play either Spellcasting Teferi or Predatory Walls.</p>
            </blockquote>
            <figcaption class="blockquote-footer">https://magic.wizards.com/en/articles/archive/card-preview/behind-scenes-designing-jumpstart-2020-06-17</figcaption>
        </figure>
        <h3 class="text-primary mb-3">Your packs</h3>
        <div class="row">
            <div class="col">
                <p><img src="" id="packOneImage" style="width: 10em;" /></p>
                <p id="packOneParagraph"></p>
            </div>
            <div class="col">
                <label class="form-label w-100">
                    Pack list
                    <textarea rows="10" readonly id="packOneTextarea" class="form-control"></textarea>
                </label>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col">
                <p><img src="" id="packTwoImage" style="width: 10em;" /></p>
                <p id="packTwoParagraph"></p>
            </div>
            <div class="col">
                <label class="form-label w-100">
                    Pack list
                    <textarea rows="10" readonly id="packTwoTextarea" class="form-control"></textarea>
                </label>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col">
                <p><img src="" id="packThreeImage" style="width: 10em;" /></p>
                <p id="packThreeParagraph"></p>
            </div>
            <div class="col">
                <label class="form-label w-100">
                    Pack list
                    <textarea rows="10" readonly id="packThreeTextarea" class="form-control"></textarea>
                </label>
            </div>
        </div>
        <hr />
        <div class="row mb-3">
            <div class="col">
                <p><img src="" id="packFourImage" style="width: 10em;" /></p>
                <p id="packFourParagraph"></p>
            </div>
            <div class="col">
                <label class="form-label w-100">
                    Pack list
                    <textarea rows="10" readonly id="packFourTextarea" class="form-control"></textarea>
                </label>
            </div>
        </div>
        <h3 class="text-primary">Your decks</h3>
        <div class="row mb-3">
            <div class="col border-end">
                <h4 class="text-secondary">Deck 1</h3>
                <div class="form-check w-100">
                    <label for="deckOneCheckboxOne" class="form-check-label"></label>
                    <input type="checkbox" id="deckOneCheckboxOne" class="form-check-input" />
                </div>
                <div class="form-check w-100">
                    <label for="deckOneCheckboxTwo" class="form-check-label"></label>
                    <input type="checkbox" id="deckOneCheckboxTwo" class="form-check-input" />
                </div>
                <div class="form-check w-100">
                    <label for="deckOneCheckboxThree" class="form-check-label"></label>
                    <input type="checkbox" id="deckOneCheckboxThree" class="form-check-input" />
                </div>
                <div class="form-check w-100 mb-3">
                    <label for="deckOneCheckboxFour" class="form-check-label"></label>
                    <input type="checkbox" id="deckOneCheckboxFour" class="form-check-input" />
                </div>
                <label class="form-label w-100">
                    Deck list
                    <textarea rows="10" readonly id="deckOneTextarea" class="form-control"></textarea>
                </label>
            </div>
            <div class="col">
                <h4 class="text-secondary">Deck 2</h3>
                <div class="form-check w-100">
                    <label for="deckTwoCheckboxOne" class="form-check-label"></label>
                    <input type="checkbox" id="deckTwoCheckboxOne" class="form-check-input" />
                </div>
                <div class="form-check w-100">
                    <label for="deckTwoCheckboxTwo" class="form-check-label"></label>
                    <input type="checkbox" id="deckTwoCheckboxTwo" class="form-check-input" />
                </div>
                <div class="form-check w-100">
                    <label for="deckTwoCheckboxThree" class="form-check-label"></label>
                    <input type="checkbox" id="deckTwoCheckboxThree" class="form-check-input" />
                </div>
                <div class="form-check w-100 mb-3">
                    <label for="deckTwoCheckboxFour" class="form-check-label"></label>
                    <input type="checkbox" id="deckTwoCheckboxFour" class="form-check-input" />
                </div>
                <label class="form-label w-100">
                    Deck list
                    <textarea rows="10" readonly id="deckTwoTextarea" class="form-control"></textarea>
                </label>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script>
        const estersCube = `Pack name,Pack image URL,Card set ID,Card name
"Dogs 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/7/76/JMP_Dogs_pack_summary_card.jpg","jmp","Affa Guard Hound"
"Dogs 1","","jmp","Supply Runners"
"Dogs 1","","jmp","Cathar's Companion"
"Dogs 1","","jmp","Trusty Retriever"
"Dogs 1","","jmp","Pack Leader"
"Dogs 1","","jmp","Selfless Savior"
"Dogs 1","","jmp","Alpine Watchdog"
"Dogs 1","","jmp","Rambunctious Mutt"
"Dogs 1","","jmp","Release the Dogs"
"Dogs 1","","jmp","Secure the Scene"
"Dogs 1","","jmp","Feat of Resistance"
"Dogs 1","","jmp","Pacifism"
"Dogs 1","","jmp","Thriving Heath"
"Dogs 1","","jmp","Plains"
"Dogs 1","","jmp","Plains"
"Dogs 1","","jmp","Plains"
"Dogs 1","","jmp","Plains"
"Dogs 1","","jmp","Plains"
"Dogs 1","","jmp","Plains"
"Dogs 1","","jmp","Plains"
"Angels 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/d/d2/JMP_Angels_pack_summary_card.jpg","jmp","Emancipation Angel"
"Angels 1","","jmp","Serra Angel"
"Angels 1","","jmp","Angelic Page"
"Angels 1","","jmp","Voice of the Provinces"
"Angels 1","","jmp","Baneslayer Angel"
"Angels 1","","jmp","Anointed Chorister"
"Angels 1","","jmp","Celestial Enforcer"
"Angels 1","","jmp","Angelic Edict"
"Angels 1","","jmp","Angelic Ascension"
"Angels 1","","jmp","Feat of Resistance"
"Angels 1","","jmp","Guardian Idol"
"Angels 1","","jmp","Scroll of Avacyn"
"Angels 1","","jmp","Thriving Heath"
"Angels 1","","jmp","Plains"
"Angels 1","","jmp","Plains"
"Angels 1","","jmp","Plains"
"Angels 1","","jmp","Plains"
"Angels 1","","jmp","Plains"
"Angels 1","","jmp","Plains"
"Angels 1","","jmp","Plains"
"Heavily Armored 2","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/9/9b/JMP_Heavily_Armored_pack_summary_card.jpg","jmp","Patron of the Valiant"
"Heavily Armored 2","","jmp","Bulwark Giant"
"Heavily Armored 2","","jmp","Trusty Retriever"
"Heavily Armored 2","","jmp","Lightwalker"
"Heavily Armored 2","","jmp","Tempered Veteran"
"Heavily Armored 2","","jmp","Siege Striker"
"Heavily Armored 2","","jmp","Makeshift Battalion"
"Heavily Armored 2","","jmp","Basri's Acolyte"
"Heavily Armored 2","","jmp","Gird for Battle"
"Heavily Armored 2","","jmp","Secure the Scene"
"Heavily Armored 2","","jmp","Battlefield Promotion"
"Heavily Armored 2","","jmp","Cathars' Crusade"
"Heavily Armored 2","","jmp","Thriving Heath"
"Heavily Armored 2","","jmp","Plains"
"Heavily Armored 2","","jmp","Plains"
"Heavily Armored 2","","jmp","Plains"
"Heavily Armored 2","","jmp","Plains"
"Heavily Armored 2","","jmp","Plains"
"Heavily Armored 2","","jmp","Plains"
"Heavily Armored 2","","jmp","Plains"
"Spirits 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/d/d5/JMP_Spirits_pack_summary_card.jpg","jmp","Battleground Geist"
"Spirits 1","","jmp","Departed Deckhand"
"Spirits 1","","jmp","Nebelgast Herald"
"Spirits 1","","jmp","Murmuring Phantasm"
"Spirits 1","","jmp","Shacklegeist"
"Spirits 1","","jmp","Roaming Ghostlight"
"Spirits 1","","jmp","Tome Anima"
"Spirits 1","","jmp","Winged Words"
"Spirits 1","","jmp","Essence Flux"
"Spirits 1","","jmp","Befuddle"
"Spirits 1","","jmp","Frost Breath"
"Spirits 1","","jmp","Capture Sphere"
"Spirits 1","","jmp","Thriving Isle"
"Spirits 1","","jmp","Island"
"Spirits 1","","jmp","Island"
"Spirits 1","","jmp","Island"
"Spirits 1","","jmp","Island"
"Spirits 1","","jmp","Island"
"Spirits 1","","jmp","Island"
"Spirits 1","","jmp","Island"
"Well-Read 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/6/6d/JMP_Well-Read_pack_summary_card.jpg","jmp","Suspicious Bookcase"
"Well-Read 1","","jmp","Ormos, Archive Keeper"
"Well-Read 1","","jmp","Oneirophage"
"Well-Read 1","","jmp","Erratic Visionary"
"Well-Read 1","","jmp","Runed Servitor"
"Well-Read 1","","jmp","Tolarian Kraken"
"Well-Read 1","","jmp","Tome Anima"
"Well-Read 1","","jmp","Library Larcenist"
"Well-Read 1","","jmp","Opt"
"Well-Read 1","","jmp","Curiosity"
"Well-Read 1","","jmp","Narcolepsy"
"Well-Read 1","","jmp","Rousing Read"
"Well-Read 1","","jmp","Thriving Isle"
"Well-Read 1","","jmp","Island"
"Well-Read 1","","jmp","Island"
"Well-Read 1","","jmp","Island"
"Well-Read 1","","jmp","Island"
"Well-Read 1","","jmp","Island"
"Well-Read 1","","jmp","Island"
"Well-Read 1","","jmp","Island"
"Pirates 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/9/9c/JMP_Pirates_pack_summary_card.jpg","jmp","Rishadan Airship"
"Pirates 1","","jmp","Corsair Captain"
"Pirates 1","","jmp","Departed Deckhand"
"Pirates 1","","jmp","Spectral Sailor"
"Pirates 1","","jmp","Kitesail Corsair"
"Pirates 1","","jmp","Prosperous Pirates"
"Pirates 1","","jmp","Sailor of Means"
"Pirates 1","","jmp","Chart a Course"
"Pirates 1","","jmp","Voyage's End"
"Pirates 1","","jmp","Pirate's Cutlass"
"Pirates 1","","jmp","Coastal Piracy"
"Pirates 1","","jmp","Waterknot"
"Pirates 1","","jmp","Thriving Isle"
"Pirates 1","","jmp","Island"
"Pirates 1","","jmp","Island"
"Pirates 1","","jmp","Island"
"Pirates 1","","jmp","Island"
"Pirates 1","","jmp","Island"
"Pirates 1","","jmp","Island"
"Pirates 1","","jmp","Island"
"Vampires 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/a/a5/JMP_Vampires_pack_summary_card.jpg","jmp","Blood Artist"
"Vampires 1","","jmp","Bloodbond Vampire"
"Vampires 1","","jmp","Gifted Aetherborn"
"Vampires 1","","jmp","Kalastria Nightwatch"
"Vampires 1","","jmp","Nocturnal Feeder"
"Vampires 1","","jmp","Vito, Thorn of the Dusk Rose"
"Vampires 1","","jmp","Silversmote Ghoul"
"Vampires 1","","jmp","Gloom Sower"
"Vampires 1","","jmp","Agonizing Syphon"
"Vampires 1","","jmp","Sanguine Indulgence"
"Vampires 1","","jmp","Last Gasp"
"Vampires 1","","jmp","Eternal Thirst"
"Vampires 1","","jmp","Thriving Moor"
"Vampires 1","","jmp","Swamp"
"Vampires 1","","jmp","Swamp"
"Vampires 1","","jmp","Swamp"
"Vampires 1","","jmp","Swamp"
"Vampires 1","","jmp","Swamp"
"Vampires 1","","jmp","Swamp"
"Vampires 1","","jmp","Swamp"
"Reanimated 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/a/ab/JMP_Reanimated_pack_summary_card.jpg","jmp","Mire Triton"
"Reanimated 1","","jmp","Cadaver Imp"
"Reanimated 1","","jmp","Crow of Dark Tidings"
"Reanimated 1","","jmp","Miasmic Mummy"
"Reanimated 1","","jmp","Tithebearer Giant"
"Reanimated 1","","jmp","Archfiend's Vessel"
"Reanimated 1","","jmp","Goremand"
"Reanimated 1","","jmp","Crypt Lurker"
"Reanimated 1","","jmp","Reanimate"
"Reanimated 1","","jmp","Funeral Rites"
"Reanimated 1","","jmp","Rise Again"
"Reanimated 1","","jmp","Eliminate"
"Reanimated 1","","jmp","Thriving Moor"
"Reanimated 1","","jmp","Swamp"
"Reanimated 1","","jmp","Swamp"
"Reanimated 1","","jmp","Swamp"
"Reanimated 1","","jmp","Swamp"
"Reanimated 1","","jmp","Swamp"
"Reanimated 1","","jmp","Swamp"
"Reanimated 1","","jmp","Swamp"
"Witchcraft 2","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/1/13/JMP_Witchcraft_pack_summary_card.jpg","jmp","Tempting Witch"
"Witchcraft 2","","jmp","Bogbrew Witch"
"Witchcraft 2","","jmp","Witch of the Moors"
"Witchcraft 2","","jmp","Swarm of Bloodflies"
"Witchcraft 2","","jmp","Black Cat"
"Witchcraft 2","","jmp","Bloodhunter Bat"
"Witchcraft 2","","jmp","Festering Newt"
"Witchcraft 2","","jmp","Festering Newt"
"Witchcraft 2","","jmp","Blood Divination"
"Witchcraft 2","","jmp","Bake into a Pie"
"Witchcraft 2","","jmp","Last Gasp"
"Witchcraft 2","","jmp","Bubbling Cauldron"
"Witchcraft 2","","jmp","Thriving Moor"
"Witchcraft 2","","jmp","Swamp"
"Witchcraft 2","","jmp","Swamp"
"Witchcraft 2","","jmp","Swamp"
"Witchcraft 2","","jmp","Swamp"
"Witchcraft 2","","jmp","Swamp"
"Witchcraft 2","","jmp","Swamp"
"Witchcraft 2","","jmp","Swamp"
"Dragons 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/5/50/JMP_Dragons_pack_summary_card.jpg","jmp","Dragonloft Idol"
"Dragons 1","","jmp","Rapacious Dragon"
"Dragons 1","","jmp","Dragonspeaker Shaman"
"Dragons 1","","jmp","Dragon Hatchling"
"Dragons 1","","jmp","Lightning Shrieker"
"Dragons 1","","jmp","Terror of the Peaks"
"Dragons 1","","jmp","Hellkite Punisher"
"Dragons 1","","jmp","Bathe in Dragonfire"
"Dragons 1","","jmp","Dragon Fodder"
"Dragons 1","","jmp","Draconic Roar"
"Dragons 1","","jmp","Thrill of Possibility"
"Dragons 1","","jmp","Thriving Bluff"
"Dragons 1","","jmp","Mountain"
"Dragons 1","","jmp","Mountain"
"Dragons 1","","jmp","Mountain"
"Dragons 1","","jmp","Mountain"
"Dragons 1","","jmp","Mountain"
"Dragons 1","","jmp","Mountain"
"Dragons 1","","jmp","Mountain"
"Dragons 1","","jmp","Mountain"
"Lightning 2","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/b/b2/JMP_Lightning_pack_summary_card.jpg","jmp","Ball Lightning"
"Lightning 2","","jmp","Lightning Phoenix"
"Lightning 2","","jmp","Living Lightning"
"Lightning 2","","jmp","Weaver of Lightning"
"Lightning 2","","jmp","Lightning Visionary"
"Lightning 2","","jmp","Lightning Visionary"
"Lightning 2","","jmp","Lightning Elemental"
"Lightning 2","","jmp","Lightning-Core Excavator"
"Lightning 2","","jmp","Chain Lightning"
"Lightning 2","","jmp","Lightning Axe"
"Lightning 2","","jmp","Riddle of Lightning"
"Lightning 2","","jmp","Lightning Diadem"
"Lightning 2","","jmp","Thriving Bluff"
"Lightning 2","","jmp","Mountain"
"Lightning 2","","jmp","Mountain"
"Lightning 2","","jmp","Mountain"
"Lightning 2","","jmp","Mountain"
"Lightning 2","","jmp","Mountain"
"Lightning 2","","jmp","Mountain"
"Lightning 2","","jmp","Mountain"
"Smashing 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/7/7a/JMP_Smashing_pack_summary_card.jpg","jmp","Bloodrage Brawler"
"Smashing 1","","jmp","Flametongue Kavu"
"Smashing 1","","jmp","Borderland Marauder"
"Smashing 1","","jmp","Heartfire Immolator"
"Smashing 1","","jmp","Onakke Ogre"
"Smashing 1","","jmp","Turret Ogre"
"Smashing 1","","jmp","Bone Pit Brute"
"Smashing 1","","jmp","Volcanic Salvo"
"Smashing 1","","jmp","Fling"
"Smashing 1","","jmp","Unleash Fury"
"Smashing 1","","jmp","Shock"
"Smashing 1","","jmp","Furious Rise"
"Smashing 1","","jmp","Thriving Bluff"
"Smashing 1","","jmp","Mountain"
"Smashing 1","","jmp","Mountain"
"Smashing 1","","jmp","Mountain"
"Smashing 1","","jmp","Mountain"
"Smashing 1","","jmp","Mountain"
"Smashing 1","","jmp","Mountain"
"Smashing 1","","jmp","Mountain"
"Cats 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/a/a9/JMP_Cats_pack_summary_card.jpg","jmp","Keeper of Fables"
"Cats 1","","jmp","Initiate's Companion"
"Cats 1","","jmp","Pouncing Cheetah"
"Cats 1","","jmp","Feral Prowler"
"Cats 1","","jmp","Feline Sovereign"
"Cats 1","","jmp","Canopy Stalker"
"Cats 1","","jmp","Sabertooth Mauler"
"Cats 1","","jmp","Pridemalkin"
"Cats 1","","jmp","Enlarge"
"Cats 1","","jmp","Nature's Way"
"Cats 1","","jmp","Crushing Canopy"
"Cats 1","","jmp","Feral Invocation"
"Cats 1","","jmp","Thriving Grove"
"Cats 1","","jmp","Forest"
"Cats 1","","jmp","Forest"
"Cats 1","","jmp","Forest"
"Cats 1","","jmp","Forest"
"Cats 1","","jmp","Forest"
"Cats 1","","jmp","Forest"
"Cats 1","","jmp","Forest"
"Plus One 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/a/a9/JMP_Plus_One_pack_summary_card.jpg","jmp","Armorcraft Judge"
"Plus One 1","","jmp","Nessian Hornbeetle"
"Plus One 1","","jmp","Ironshell Beetle"
"Plus One 1","","jmp","Fertilid"
"Plus One 1","","jmp","Wildwood Scourge"
"Plus One 1","","jmp","Trufflesnout"
"Plus One 1","","jmp","Pridemalkin"
"Plus One 1","","jmp","Hunter's Edge"
"Plus One 1","","jmp","Arbor Armament"
"Plus One 1","","jmp","Invigorating Surge"
"Plus One 1","","jmp","Primeval Bounty"
"Plus One 1","","jmp","Thriving Grove"
"Plus One 1","","jmp","Forest"
"Plus One 1","","jmp","Forest"
"Plus One 1","","jmp","Forest"
"Plus One 1","","jmp","Forest"
"Plus One 1","","jmp","Forest"
"Plus One 1","","jmp","Forest"
"Plus One 1","","jmp","Forest"
"Plus One 1","","jmp","Forest"
"Predatory 1","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/2/21/JMP_Predatory_pack_summary_card.jpg","jmp","Somberwald Stag"
"Predatory 1","","jmp","Sylvan Brushstrider"
"Predatory 1","","jmp","Neyith of the Dire Hunt"
"Predatory 1","","jmp","Brindle Shoat"
"Predatory 1","","jmp","Dawntreader Elk"
"Predatory 1","","jmp","Trufflesnout"
"Predatory 1","","jmp","Sabertooth Mauler"
"Predatory 1","","jmp","Irresistible Prey"
"Predatory 1","","jmp","Time to Feed"
"Predatory 1","","jmp","Crushing Canopy"
"Predatory 1","","jmp","Fungal Rebirth"
"Predatory 1","","jmp","Marauder's Axe"
"Predatory 1","","jmp","Thriving Grove"
"Predatory 1","","jmp","Forest"
"Predatory 1","","jmp","Forest"
"Predatory 1","","jmp","Forest"
"Predatory 1","","jmp","Forest"
"Predatory 1","","jmp","Forest"
"Predatory 1","","jmp","Forest"
"Predatory 1","","jmp","Forest"
"Rainbow","https://static.wikia.nocookie.net/mtgsalvation_gamepedia/images/0/03/JMP_Rainbow_pack_summary_card.jpg","jmp","Maelstrom Archangel"
"Rainbow","","jmp","Chamber Sentry"
"Rainbow","","jmp","Dinrova Horror"
"Rainbow","","jmp","Fusion Elemental"
"Rainbow","","jmp","Raging Regisaur"
"Rainbow","","jmp","Ironroot Warlord"
"Rainbow","","jmp","Alloy Myr"
"Rainbow","","jmp","Skittering Surveyor"
"Rainbow","","jmp","Prismite"
"Rainbow","","jmp","Auger Spree"
"Rainbow","","jmp","Prophetic Prism"
"Rainbow","","jmp","Lawmage's Binding"
"Rainbow","","jmp","Mirrodin's Core"
"Rainbow","","jmp","Rupture Spire"
"Rainbow","","jmp","Forest"
"Rainbow","","jmp","Island"
"Rainbow","","jmp","Mountain"
"Rainbow","","jmp","Plains"
"Rainbow","","jmp","Swamp"
"Rainbow","","jmp","Terramorphic Expanse"`;

        const twoPackElements = {
            images: [document.getElementById('imageOne'), document.getElementById('imageTwo')],
            textarea: document.getElementById('textarea'),
            paragraph: document.getElementById('packsParagraph')
        };

        const fourPackElements = {
            packImages: [
                document.getElementById('packOneImage'),
                document.getElementById('packTwoImage'),
                document.getElementById('packThreeImage'),
                document.getElementById('packFourImage')
            ],
            packTextareas: [
                document.getElementById('packOneTextarea'),
                document.getElementById('packTwoTextarea'),
                document.getElementById('packThreeTextarea'),
                document.getElementById('packFourTextarea')
            ],
            deckCheckboxes: [[
                document.getElementById('deckOneCheckboxOne'),
                document.getElementById('deckOneCheckboxTwo'),
                document.getElementById('deckOneCheckboxThree'),
                document.getElementById('deckOneCheckboxFour')
            ], [
                document.getElementById('deckTwoCheckboxOne'),
                document.getElementById('deckTwoCheckboxTwo'),
                document.getElementById('deckTwoCheckboxThree'),
                document.getElementById('deckTwoCheckboxFour')
            ]],
            deckTextareas: [
                document.getElementById('deckOneTextarea'),
                document.getElementById('deckTwoTextarea')
            ],
            paragraphs: [
                document.getElementById('packOneParagraph'),
                document.getElementById('packTwoParagraph'),
                document.getElementById('packThreeParagraph'),
                document.getElementById('packFourParagraph')
            ]
        };

        document.getElementById('fileInput').addEventListener('change', function() {
            onFileInputChange(document.getElementById('fileInput'), twoPackElements, fourPackElements, document.getElementById('importParagraph'));
        });

        document.getElementById('estersCubeButton').addEventListener('click', function() {
            load(estersCube, twoPackElements, fourPackElements, document.getElementById('importParagraph'));
        });

        function onFileInputChange(input, twoPackElements, fourPackElements, importParagraph) {
            const fileReader = new FileReader;
            fileReader.onload = function() {
                load(fileReader.result, twoPackElements, fourPackElements, importParagraph);
            }
            fileReader.readAsText(input.files[0]);
        }

        function load(csv, twoPackElements, fourPackElements, paragraph) {
            let records = csv.split('\n').slice(1).map(row => {
                let columns = row.split(',').map(column => column.trim());
                if (columns > 4) {
                    return columns.slice(0, 3).concat(columns.slice(3).join(','));
                }
                if (columns.length == 4) {
                    return columns.map(column => column.substring(1, column.length - 1));
                }
                else {
                    return null;
                }
            }).filter(x => x != null);
            let packs = [];
            records.forEach(record => {
                let pack = packs.find(x => x.name == record[0]);
                if (!pack) {
                    pack = new Pack(record[0], record[1], []);
                    packs.push(pack);
                }
                if (!pack.cards.find(x => x.name == record[3])) {
                    let quantity = records.filter(x => x[0] == record[0] && x[3] == record[3]).length;
                    pack.cards.push(new Card(record[3], record[2], quantity));
                }
            });
            console.log(packs);
            paragraph.innerHTML = `Loaded ${packs.length} packs.`;
            openTwoPacks(packs, twoPackElements);
            openFourPacks(packs, fourPackElements);
        }

        function openTwoPacks(packs, elements) {
            shuffle(packs);
            for (let i = 0; i < 2; i++) {
                elements.images[i].setAttribute('src', packs[i].imageURL);
            }
            write(packs.slice(0, 2), elements.textarea);
            elements.paragraph.innerHTML = `You opened ${packs[0].name} and ${packs[1].name}.`;
        }

        function openFourPacks(packs, elements) {
            shuffle(packs);

            // Update pack images
            for (let i = 0; i < 4; i++) {
                elements.packImages[i].setAttribute('src', packs[i].imageURL);
            }

            // Update pack lists
            for (let i = 0; i < 4; i++) {
                write([packs[i]], elements.packTextareas[i]);
            }

            // Update pack names
            for (let i = 0; i < 4; i++) {
                elements.paragraphs[i].innerHTML = packs[i].name;
            }

            // Update checkboxes
            for (let deckIndex = 0; deckIndex < 2; deckIndex++) {
                for (let checkIndex = 0; checkIndex < 4; checkIndex++) {
                    let checkbox = elements.deckCheckboxes[deckIndex][checkIndex];

                    // Update labels
                    checkbox.previousElementSibling.innerHTML = packs[checkIndex].name;
                    checkbox.checked = false;

                    // Update events
                    checkbox.addEventListener('change', () => {
                        writeDeck(packs.slice(0, 4), elements.deckCheckboxes[deckIndex], elements.deckTextareas[deckIndex]);
                        updateCheckboxes(elements.deckCheckboxes);
                    });
                }
            }

            function writeDeck(packs, checkboxes, textarea) {
                let checkedPacks = [];
                for (let i = 0; i < 4; i++) {
                    if (checkboxes[i].checked) {
                        checkedPacks.push(packs[i]);
                    }
                }
                write(checkedPacks, textarea);
            }

            function updateCheckboxes(deckCheckboxes) {
                let indexes = [];
                for (let deckIndex = 0; deckIndex < 2; deckIndex++) {
                    for (let checkIndex = 0; checkIndex < 4; checkIndex++) {
                        if (deckCheckboxes[deckIndex][checkIndex].checked && !indexes.includes(checkIndex)) {
                            indexes.push(checkIndex);
                        }
                    }
                }
                for (let deckIndex = 0; deckIndex < 2; deckIndex++) {
                    let checked = deckCheckboxes[deckIndex].filter(x => x.checked).length;
                    for (let checkIndex = 0; checkIndex < 4; checkIndex++) {
                        let checkbox = deckCheckboxes[deckIndex][checkIndex];
                        if (checkbox.checked || (checked < 2 && !indexes.includes(checkIndex))) {
                            checkbox.removeAttribute('disabled');
                            checkbox.previousElementSibling.classList.remove('text-muted');
                        }
                        else {
                            checkbox.setAttribute('disabled', 'true');
                            checkbox.previousElementSibling.classList.add('text-muted');
                        }
                    }
                }
            }
        }

        function write(packs, textarea) {
            textarea.innerHTML = '';
            packs.forEach(pack => {
                pack.cards.forEach(card => {
                    textarea.innerHTML += `${card.quantity} ${card.name} (${card.setID})\n`;
                });
            });
        }

        function shuffle(packs) {
            for (let i = packs.length -1; i > 0; i--) {
                let j = Math.floor(Math.random() * i);
                let k = packs[i];
                packs[i] = packs[j];
                packs[j] = k;
            }
        }

        function Pack(name, imageURL, cards) {
            this.name = name;
            this.imageURL = imageURL;
            this.cards = cards;
        }

        function Card(name, setID, quantity) {
            this.name = name;
            this.setID = setID;
            this.quantity = quantity;
        }
    </script>
</body>
</html>
